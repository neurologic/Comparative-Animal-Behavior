# Analysis

***Q: Briefly define each of the sampling methods defined by Altmann[^Altmann]***

[^Altmann]: [Jeanne Altmann 1973 *Observational Study of Behavior: Sampling Methods* Behaviour
49(3/4).](https://www.jstor.org/stable/4533591)

## Focal versus scan sampling

+++

***Q: You are interested in how manakin birds sequence behavioral actions during courtship rituals. Would it be more appropriate to use focal or scan sampling on a group of 5 birds? Why?*** 

***Q: You are interested in the activity budget of african elephants under captive versus wild conditions. Would it be more appropriate to use focal or scan sampling on a group of 5 elephants? Why?*** 

## Continuous versus interval sampling

***Q: Would it be better to use continuous or interval sampling when recording the behavior of multiple animals simultaneously? Better in what way? What would be a downside of that sampling method choice?***

## Activity budgets and transitions

Do some behaviors happen more than others? Why might some behaviors happen more than others? 

***Q: What activity budget would you expect "by chance" for each behavior in an ethogram? Calculate this 'null hypothesis' for an animal with an ethogram of 5 behaviors: X, Y, Z, A, and P.***  

What about the sequence of behaviors? Are behaviors independent of each other or are some behaviors more likely to follow each other? Can you think of any examples?

For any sequence of non-independent events in the world, and where a limited number of outcomes can occur, *conditional probabilities* relate each outcome to one another. For example, if you smile at me, you are more likely to hug me than to hit me (the conditional probability of a hug following a smile is bigger than a hit following a smile). 

These concepts are often used to analyze language. As an illustration of the concept, consider the following poem.

:::{epigraph} 
One fish two fish red fish blue fish.

--Dr Suess
:::

***Q: How many possible words are there (given the poem)?***

***Q: As an analogy to behavior, what is the 'activity budget' for each word?***

A *transition matrix* for an ethogram is a table commonly used to summarize the probability that each behavior in the ethogram follows another. Before doing this analysis on behavior, practice it on the Dr Suess poem.

***Q: Make a square table with all possible words in the rows and all possible words in the columns. Count how many time each word follows each other word in the Dr Suess poem and log it in the table. For each pair of sequential words, the rows represent the preceding word and the columns the succeeding word.***

***Q: Calculate transition probabilities for each word to each other word as $p = t/n$, where $t$ is the total number of each transition and $n$ is the total number of transitions out of the preceeding word (usually the total number of times the word occurred).***

You now have a model that describes how Dr. Suess' poem is sequenced. 

The model that you just created can be visualized graphically for a different perspective on the concept.  

:::{figure-md} markdown-fig
<img src="../images/One-Fish-Two-Fish_Markov.gif" alt="fishy" class="bg-primary mb-1" width="600px">

Markov model of Dr Seuss' fish poem.
:::

Examine the following two transition matrices. 

One:  
|  | A | B | C |
| --- | --- | --- | --- |
| A | 0 | 0.2 | 0.8 |
| B | 0.9 | 0 | 0.1 |
| C | 0.4 | 0.6 | 0 |  

Two:  
|  | X | Y | Z |
| --- | --- | --- | --- |
| X | 0.1 | 0.6 | 0.3 |
| Y | 0.1 | 0.4 | 0.5 |
| Z | 0.8 | 0.2 | 0 |

***Q: According to matrix number one, what is a likely behavioral sequence generated by this species? Provide a sample sequence of 10 behaviors.***

***Q: According to matrix number two, what is a likely behavioral sequence generated by this species? Provide a sample sequence of 10 behaviors.***

***Q: Which of the two transition matrices was more likely calculated using continuous sampling methods? Which was more likely calculated using interval sampling methods? Why?***


## Changing priorities influence motivation: case study on vigilance

Watch [this clip](https://vimeo.com/80600820) of meerkats engaging in vigilance behaviors. 

**Vigilant**: Head raised at or above horizontal plain and eyes open. 

***Q: What function could vigilance serve?***

***Q: What behaviors do you observe when vigilance is not ocurring?***

To test whether vigilance functions in avoiding predation, you will quantify behavior based on a simplified ethogram including three behaviors:
1. vigilant (head raised at or above horizontal plain and eyes open)
2. not vigilant (eyes closed or head lower than horizontal plane) 
3. out of sight (not visible by you, the researcher)

You will watch three different videos, each with a different *predator* treatment condition.
- [No predator](https://vimeo.com/80600822)
- [Terrestrial predator](https://vimeo.com/71877438)
- [Aerial predator](https://vimeo.com/80600821)

For each video, record the number of meerkats performing each behavior at 10 second intervals. 

***Q: What type of sampling method[^Altmann] is this?***

***Q: Use your results to present an argument for or against the hypothesis that "vigilance serves an anti-predator function"***

***Q: Use your results to present an argument for or against the hypothesis that "vigilance is more useful against terrestrial predators"***

***Q: What other function(s) did you hypothesize for vigilance? How would you test another possible function that you posed?***

Next, you will use continuous focal sampling to investigate whether the proximity of a detected predator influences the activity budget of meerkat behavior. Again, you will consider 'vigilant', 'not vigilant', and 'out of sightâ€™ as the three behaviors comprising the ethogram for this study. Data should be collected for ONE meerkat at each distance of predator presentation (0 m, 2 m, 4 m, 6 m, 8 m, 10 m, 12 m, 14 m). Record the start time of each behaviour on a new line as shown:

| **Behavior** | **Start time** | **Duration** |
| --- | --- | --- |
| name of behavior | cummulative seconds | calculated | 

We will want 3 repititions (different observers) of the analysis at each distance. 

***Q: What behavioral metric (based on your continuous sampling data) do you propose to calculate to test if predator proximity influences the trade-off between vigilant and non vigilant behavior (activity budget)? Define any relevant mathematical equation(s) for your calculation(s).***

Watch [the video clip](https://vimeo.com/77501205) corresponding to the distance you are responsible for and collect your data. 
| distance | start time in video |
| ---| --- | 
| 14m | 0:10 |
| 12m | 3:11 |
| 10m | 6:32 |
| 8m | 9:39 |
| 6m | 12:46 |
| 4m | 15:52 |
| 2m | 18:58 |
| 0m | 22:01 |

We can carry out a Spearman rank correlation test to see if there is a relationship between predator distance and vigilance behaviour.

___

## Take Home Work

***Q: Carry out the same experiment, but use an interval scan sampling method instead. For simplicity, collect data only for the following distances: 14, 10, 6, 2m). Create a figure to clearly report your results. Clearly describe your sampling protocol/method. Define any calculations that you did on the raw data.***

***Q: Create an ethogram for an animal you are interested in. Give it to your partner. Use the ethogram to create a transition matrix of behavior. Make sure to include what samping method you used. Show a table of your raw transition data and describe the calculation used to obtain probability.***


___

Resources used in this workshop: 
- [denajane13 bookdown](https://bookdown.org/denajane13/BIONB_2210_Summer_2021/field-lab-2-ethograms-and-activity-budgets.html#part-1.-build-an-ethogram-from-meerkat-observations)
- [Hammond 2019, Vigilance behaviour in meerkats, ASAB Education](https://www.asab.org/s/EDU-ASAB-Vigilance-behaviour-in-meerkats-compressed.pdf)

___

Markov simulation code

:::{code}
import numpy as np

def make_pairs(corpus):
    for i in range(len(corpus)-1):
        yield (corpus[i], corpus[i+1])

<!-- # Trump's speeches here: https://github.com/ryanmcdermott/trump-speeches
trump = open('/content/speeches.txt', encoding='utf8').read()

corpus = trump.split()

 -->
s = 'one fish two fish red fish blue fish '
corpus = s.split()

pairs = make_pairs(corpus)

word_dict = {}

for word_1, word_2 in pairs:
    if word_1 in word_dict.keys():
        word_dict[word_1].append(word_2)
    else:
        word_dict[word_1] = [word_2]
 
first_word = np.random.choice(corpus)

while first_word.islower():
    first_word = np.random.choice(corpus)

chain = [first_word]

n_words = 20

for i in range(n_words):
    chain.append(np.random.choice(word_dict[chain[-1]]))

' '.join(chain)
:::